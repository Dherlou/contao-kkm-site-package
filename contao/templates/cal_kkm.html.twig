{% block cal_kkm %}
    <table class="calendar">
        <thead>
            {% block cal_kkm_header %}
                <tr>
                    <th colspan="2" class="head previous hc-bg-black-ter">
                        {% if prevHref|default('') %}
                            <a href="{{ prevHref }}" title="{{ prevTitle }}">{{ prevLink }}</a>
                        {% else %}
                            &nbsp;
                        {% endif %}
                    </th>
                    <th colspan="3" class="head current hc-bg-black-ter">{{ current }}</th>
                    <th colspan="2" class="head next hc-bg-black-ter">
                        {% if nextHref|default('') %}
                            <a href="{{ nextHref }}" title="{{ nextTitle }}">{{ nextLink }}</a>
                        {% else %}
                            &nbsp;
                        {% endif %}
                    </th>
                </tr>
            {% endblock %}

            {% block cal_kkm_weekday_labels %}
                <tr>
                    {% for day in days|default([]) %}
                        <th class="label{{ day.class|default('') }} hc-bg-grey-dark">{{ day.name }}</th>
                    {% endfor %}
                </tr>
            {% endblock %}
        </thead>

        {% block cal_kkm_body %}
            <tbody>
                {% for week in weeks|default([]) %}
                    <tr>
                        {% for day in week %}
                            <td class="{{ day.class|default('') ? day.class ~ ' ' : '' }}hc-bg-grey-dark">
                                {% block cal_kkm_day_header %}
                                    <div class="header">{{ day.label }}</div>
                                {% endblock %}

                                {% block cal_kkm_day_events %}
                                    {% for event in day.events|default([]) %}
                                        <div class="event cal_{{ event.parent }}{{ event.class }} mt-10">
                                            <a href="{{ event.href }}"
                                               title="{{ event.title }} ({% if event.day|default('') %}{{ event.day }}, {% endif %}{{ event.date }}{% if event.time|default('') %} {{ event.time }}{% endif %})"
                                               {{ event.target|raw }}>
                                                {% if event.time %}
                                                    {{ event.time|kkm_time_cal }}<br/>
                                                {% endif %}
                                                {{ event.link }}
                                            </a>
                                        </div>
                                    {% endfor %}
                                {% endblock %}
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        {% endblock %}
    </table>
{% endblock %}
